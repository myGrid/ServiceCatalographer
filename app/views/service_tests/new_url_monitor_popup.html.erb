<%

   # ServiceCatalographer: app/views/service_tests/new_url_monitor_popup.html.erb
   #
   # Copyright (c) 2011, University of Manchester, The European Bioinformatics
   # Institute (EMBL-EBI) and the University of Southampton.
   # See license.txt for details

%>

<div class="redbox_contents" style="width:700px;">

  <div class="head">
    <%= link_to_close_redbox image_tag("close.gif"), :style => "float:right; margin-left:0.5em; vertical-align:middle;" -%>
    <span style="vertical-align:middle;">Add Endpoint To Monitor</span>
  </div>

  <div class="body">
    <%= form_for :service_test, :url => {:controller => "service_tests", :action => "create_monitoring_endpoint", :service_id => @service.id} do |f| %>
        <% if !@service_test.nil? && !@service_test.errors.nil? then %>
            <% @service_test.errors.full_messages.each do |err| %>
                <%= err %>
            <% end %>
        <% end %>

        <div>
          <div class="box_info_standout">
            <%= annotation_add_info_text("monitoring_endpoint", @service) -%>
          </div>

          <p class="step_text">Enter the URL to monitor:</p>

          <div class="box_info_standout" style="font-size:90%;">
            <b>Note:</b> the endpoint to be monitoring should be preceded by the base URL:<br/>
            <b><%= h(@service.service_deployments.first.endpoint) -%></b>
          </div>

          <p class="high_linespaced form_field_section">
            <%= text_field_tag "monitoring_endpoint", h(@service.service_deployments.first.endpoint), :style => "width: 99%;" %>
          </p>

          <!--SUBMIT-->
          <p style="margin-top: 1.5em; text-align: center;">
            <%= f.submit "Submit", :disable_with => "Submitting..." -%>
            <%= button_to_function "Close", "RedBox.close()" -%>
          </p>

        </div>
    <% end %>
  </div>
</div>
